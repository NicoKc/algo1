\documentclass{article}
\usepackage{xcolor}
\input{../../../../recursos/latex/Algo1Macros.tex}

\begin{document}

\section*{Ejercicio 9}

\subsection*{a)}

\begin{verbatim}
    while(i >= (s.size() / 2)) do
        suma := suma + s[s.size()-1-i]
        i := i - 1;
    endwhile
    
\end{verbatim}
\subsection*{Teorema del invariante}
\begin{itemize}
    \item $P_{c} \implica I$
    \item $(I \wedge \neg B) \implica Q_{c}$
    \item $\{I \wedge B\}$ ciclo $\{ I \}$
    \item $\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$
    \item $(I \wedge f_{v} \leq 0) \implica \neg B$
\end{itemize}

\subsection*{DemostraciÃ³n}
\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv \longitud{s} \bmod 2 = 0 \wedge i = \longitud{s} - 1 \wedge suma = 0 $
    \item $Q_{c}    \equiv \longitud{s} \bmod 2 = 0 \wedge i = \frac{\longitud{s}}{2} - 1 \yLuego suma = \sum_{j=0}^{\frac{\longitud{s}}{2}-1} s[j] $
    \item $I        \equiv (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] $
    \item $B        \equiv i \geq \frac{\longitud{s}}{2}$
    \item $S1       \equiv suma := suma + s[\longitud{s}-1-i];$
    \item $S2       \equiv i:= i - 1;$
    \item $ciclo    \equiv S1;S2;$
    \item $f_{v}    \equiv i$
\end{itemize}

\subsubsection*{$P_{c} \implica I$}

$P_{c} \implica I \equiv$

$ \longitud{s} \bmod 2 = 0 \wedge i = \longitud{s} - 1 \wedge suma = 0 \implica$

$ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \equiv \True$

\subsubsection*{$(I \wedge \neg B) \implica Q_{c}$}

$ (I \wedge \neg B) \implica Q_{c} \equiv $

\begin{itemize}
    \item $(I \wedge \neg B) \equiv $

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \wedge \neg (i \geq \frac{\longitud{s}}{2}) \equiv$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \wedge \frac{\longitud{s}}{2} > i \equiv$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 = i ) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] $
\end{itemize}

$ (I \wedge \neg B) \implica Q_{c} \equiv $ \\

$ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 = i ) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \implica$

$ \longitud{s} \bmod 2 = 0 \wedge i = \frac{\longitud{s}}{2} - 1 \yLuego suma = \sum_{j=0}^{\frac{\longitud{s}}{2}-1} s[j] \equiv \True $

\subsubsection*{$\{I \wedge B\}$ ciclo $\{ I \}$}

$wp(S1;S2, I) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, I))$

\begin{itemize}
    \item $wp(S2; I) \equiv$

    $wp(i:= i-1;, (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j]) \stackrel{Ax1}{\equiv}$

    $\{(\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i - 1 \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-1-i} s[j]\}$

    \item $wp(S1, wp(S2, I)) \equiv$

    $wp(suma := suma + s[\longitud{s}-1-i];, (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i - 1 \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-1-i} s[j])\stackrel{Ax1}{\equiv}$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i - 1 \leq \longitud{s} - 1) \yLuego suma + s[\longitud{s}-1-i] = \sum_{j=0}^{\longitud{s}-1-i} s[j]$

\end{itemize}

Qvq $I \wedge B \implica wp(S1;S2, I)$

\begin{itemize}
    \item $I \wedge B \equiv$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \wedge i \geq \frac{\longitud{s}}{2} \equiv$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] $

    \item $I \wedge B \implica wp(S1;S2, I) \equiv$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} \leq i \leq \longitud{s} - 1) \yLuego suma = \sum_{j=0}^{\longitud{s}-2-i} s[j] \implica$

    $ (\longitud{s} \bmod 2 = 0 \wedge \frac{\longitud{s}}{2} - 1 \leq i - 1 \leq \longitud{s} - 1) \yLuego suma + s[\longitud{s}-1-i] = \sum_{j=0}^{\longitud{s}-i} s[j] $

\end{itemize}

\subsubsection*{$\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$}

$wp(S1;S2, i<v_{0}) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, \longitud{s}-i<v_{0}))$

\begin{itemize}
    \item $wp(S2, i<v_{0}) \equiv$
    
    $ wp(i:= i-1, i<v_{0})) \stackrel{Ax1}{\equiv}$

    $\{i-1<v_{0}) \}$

    \item $wp(S1, wp(S2, f_{v} < v_{0})) \equiv$

    $wp(suma := suma + s[\longitud{s}-1-i], i-1<v_{0}) \equiv$

    $\{ 0 \leq \longitud{s}-1-i < \longitud{s} \yLuego i-1<v_{0} \} $

\end{itemize}

Qvq $(I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0})$ \\

$ (I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0}) \equiv$ \\

$ (I \wedge B \wedge (v_{0} = i)\implica$

$ 0 \leq \longitud{s}-1-i < \longitud{s} \yLuego i-1<v_{0} \equiv \True$

\subsubsection*{$(I \wedge f_{v} \leq 0) \implica \neg B$}

$(I \wedge f_{v} \leq 0) \implica \neg B \equiv $

$I \wedge i \leq 0 \implica i < \frac{\longitud{s}}{2} \equiv \True$

\end{document}
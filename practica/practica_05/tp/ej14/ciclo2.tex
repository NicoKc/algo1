\documentclass{article}
\usepackage{xcolor}
\input{../../../../recursos/latex/Algo1Macros.tex}

\begin{document}

\section*{Ejercicio 14}

\subsection*{Teorema del invariante}
\begin{itemize}
    \item $P_{c} \implica I$
    \item $(I \wedge \neg B) \implica Q_{c}$
    \item $\{I \wedge B\}$ ciclo $\{ I \}$
    \item $\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$
    \item $(I \wedge f_{v} \leq 0) \implica \neg B$
\end{itemize}

\subsection*{DemostraciÃ³n}

\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv \longitud{r} = \longitud{a} + \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge i:= 0 \wedge \paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j]=a[j]$
    \item $Q_{c}    \equiv \longitud{r} = \longitud{R_{0}} \wedge (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{\longitud{b}} \implicaLuego r[j+\longitud{a}] = b[j])$
    \item $I        \equiv (0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i} \implicaLuego r[\longitud{a}+j]=b[j])$
    \item $B        \equiv i < \longitud{b}$
    \item $S1       \equiv r[\longitud{a}+i] = b[i]$
    \item $S2       \equiv i:= i + 1$
    \item $ciclo    \equiv S1;S2$
    \item $f_{v}    \equiv \longitud{b} - i$
\end{itemize}

\subsubsection*{$P_{c} \implica I$}
$\longitud{r} = \longitud{a} + \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge i:= 0 \wedge \paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j]=a[j] \implica$

$(0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i} \implicaLuego r[\longitud{a}+j]=b[j]) \equiv \True$

\subsubsection*{$(I \wedge \neg B) \implica Q_{c}$}
$(0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{b}} \implicaLuego r[\longitud{a}+j]=b[j]) \wedge i \geq \longitud{b} \equiv$\\

$(i = \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{b}} \implicaLuego r[\longitud{a}+j]=b[j]) \implica$

$(0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i} \implicaLuego r[\longitud{a}+j]=b[j]) \equiv \True$

\subsubsection*{$\{I \wedge B\}$ ciclo $\{ I \}$}

\begin{itemize}
    \item $\{I \wedge B\}$ ciclo $\{ I \}$
    
    $wp(S1;S2;, I) \stackrel{Ax3}{\equiv} wp(S1,wp(S2,I))$

    \begin{itemize}
        \item $wp(S2, I) \equiv wp(i:= i+1, I)$

        $ \{ (0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i+1} \implicaLuego r[\longitud{a}+j]=b[j]) \} $

        \item $wp(S1,wp(S2, I))\equiv wp(r[\longitud{a}+i] = b[i],wp(S2, I)) \equiv$

        $ \{ (0 \leq i < \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i+1} \implicaLuego setAt(r,\longitud{a}+j,b[i])[\longitud{a}+j]=b[j]) \}$
    \end{itemize}

\end{itemize}

$ (0 \leq i \leq \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i} \implicaLuego r[\longitud{a}+j]=b[j]) \wedge i < \longitud{b} \equiv $ \\

$ (0 \leq i < \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i} \implicaLuego r[\longitud{a}+j]=b[j]) \implica $

$ (0 \leq i < \longitud{b} \wedge \longitud{r} = \longitud{R_{0}} \wedge \longitud{r} = \longitud{a} + \longitud{b}) \yLuego (\paraTodo{j}{0}{\longitud{a}} \implicaLuego r[j] = a[j]) \wedge (\paraTodo{j}{0}{i+1} \implicaLuego setAt(r,\longitud{a}+j,b[i])[\longitud{a}+j]=b[j]) \equiv \True $

\subsubsection*{$\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$}

$wp(i:i+1, \longitud{b}-i<v_{0}) \equiv \longitud{b}-i-1<v_{0}$\\

$wp(r[i] = a[i], \longitud{b}-i-1<v_{0}) \equiv 0 \leq i < \longitud{b} \wedge \longitud{b}-i-1<v_{0}$\\

$I \wedge B \wedge v_{0} = \longitud{a}-i \implica 0 \leq i < \longitud{b} \wedge \longitud{b}-i-1<v_{0} \equiv \True$

\subsubsection*{$(I \wedge f_{v} \leq 0) \implica \neg B$}

$I \wedge \longitud{b}-i \leq 0 \implica i < \longitud{b} \equiv \True$

\end{document}
\documentclass{article}
\usepackage{xcolor}
\input{../../../../recursos/latex/Algo1Macros.tex}

\begin{document}

\section*{Ejercicio 3}

\subsection*{a)}
\begin{verbatim}
        i:= 0;
        result:= 1;
        while(i < n) do
            result := result * m;
            i := i + 1
        endwhile
\end{verbatim}

\subsection*{Teorema del invariante}
\begin{itemize}
    \item $P_{c} \implica I$
    \item $(I \wedge \neg B) \implica Q_{c}$
    \item $\{I \wedge B\}$ ciclo $\{ I \}$
    \item $\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$
    \item $(I \wedge f_{v} \leq 0) \implica \neg B$
\end{itemize}

\subsection*{Demostración}
\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 1$
    \item $Q_{c}    \equiv result = m^{n}$
    \item $I        \equiv 0 \leq i \leq n \wedge result = m^{i}$
    \item $B        \equiv i < n$
    \item $S1       \equiv result := result * m$
    \item $S2       \equiv i := i + 1$
    \item $ciclo    \equiv S1;S2;$
    \item $f_{v}    \equiv n-i$
\end{itemize}

\subsubsection*{$P_{c} \implica I$}

$P_{c} \implica I \equiv$

$n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 1 \implica$
$0 \leq i \leq n \wedge result = m^{i}$

\begin{itemize}
    \item $n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 1 \implica 0 \leq i \leq n \equiv \True$
    \item $n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 1 \implica result = m^{i} \equiv \True$
\end{itemize}

\subsubsection*{$(I \wedge \neg B) \implica Q_{c}$}

$(I \wedge \neg B) \implica Q_{c} \equiv$

$0 \leq i \leq n \wedge result = m^{i} \wedge i \geq n \implica result = m^{n}$

\subsubsection*{$\{I \wedge B\}$ ciclo $\{ I \}$}

$wp(S1;S2, I) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, I))$

\begin{itemize}
    \item $wp(S2; I) \equiv$

    $wp(i:= i+1, 0 \leq i \leq n \wedge result = m^{i}) \stackrel{Ax1}{\equiv}$

    $\{def(i+1) \yLuego 0 \leq i+1 \leq n \wedge result = m^{i+1}\} \equiv$

    $\{0 \leq i+1 \leq n \wedge result = m^{i+1}\} \equiv$

    \item $wp(S1, wp(S2, I)) \equiv$

    $wp(result:= result*m, 0 \leq i+1 \leq n \wedge result = m^{i+1}) \stackrel{Ax1}{\equiv}$

    $\{ def(result*m) \yLuego 0 \leq i+1 \leq n \wedge result*m = m^{i+1} \}$

    $\{ 0 \leq i+1 \leq n \wedge result*m = m^{i+1} \}$

\end{itemize}

Qvq $I \wedge B \implica wp(S1;S2, I)$

\begin{itemize}
    \item $I \wedge B \equiv$
    
    $0 \leq i \leq n \wedge result = m^{i} \wedge i < n \equiv$

    $0 \leq i \leq n \wedge result = m^{i}$

    \item $I \wedge B \implica wp(S1;S2, I) \equiv$

    $0 \leq i \leq n \wedge result = m^{i} \implica 0 \leq i+1 \leq n \wedge result*m = m^{i+1} \equiv \True$
\end{itemize}
    
\subsubsection*{$\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$}

$wp(S1;S2, n-i<v_{0}) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, n-i<v_{0})) \stackrel{Ax3}{\equiv}$

\begin{itemize}
    \item $wp(S2, n-i<v_{0}) \equiv$
    
    $ wp(i:=i+1, n-i<v_{0}) \stackrel{Ax1}{\equiv}$

    $ \{ n-i-1<v_{0}) \}$

    \item $wp(S1, wp(S2, f_{v} < v_{0})) \equiv$

    $ wp(result:= result * m, n-i-1<v_{0})) \stackrel{Ax1}{\equiv}$

    $ n-i-1<v_{0} $
\end{itemize}

Qvq $(I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0})$

$(I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0}) \equiv$

$0 \leq i \leq n \wedge result = m^{i} \wedge v_{0} = n-i \implica n-i-1<v_{0} \equiv True$

\subsubsection*{$(I \wedge f_{v} \leq 0) \implica \neg B$}

$(I \wedge f_{v} \leq 0) \implica \neg B \equiv $

$0 \leq i \leq n \wedge result = m^{i} \wedge n-i \leq 0 \implica i \geq n \equiv \True$

\subsection*{b)}

\begin{verbatim}
    i:= 0;
    result:= 0;
    while(i < m) do
        result := result * n;
        i := i + 1
    endwhile
\end{verbatim}

\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 0$
    \item $Q_{c}    \equiv result = m^{n}$
    \item $I        \equiv 0 \leq i \leq n \wedge result = m^{i}$
    \item $B        \equiv i < m$
    \item $S1       \equiv result := result * n$
    \item $S2       \equiv i := i + 1$
    \item $ciclo    \equiv S1;S2;$
    \item $f_{v}    \equiv m-i$
\end{itemize}

\subsubsection*{$P_{c} \implica I$}

    $n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 0 \implica 0 \leq i \leq n \wedge result = m^{i}$

    \begin{itemize}
        \item $n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 0 \implica 0 \leq i \leq n$
        \item $n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 0 \implica result = m^{i}$
    \end{itemize}

    Si $i=0 \wedge m \neq 0$, $m^{i} = 0 \neq result = 0$, la demostración falla

\subsection*{c)}

\begin{verbatim}
    i:= 0;
    result:= 1;
    while(i < n) do
        i := i + 1
        result := result * m;
    endwhile
\end{verbatim}

\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 0 \wedge result = 1$
    \item $Q_{c}    \equiv result = m^{n}$
    \item $I        \equiv 0 \leq i \leq n \wedge result = m^{i}$
    \item $B        \equiv i < m$
    \item $S1       \equiv i := i + 1$
    \item $S2       \equiv result := result * m$
    \item $ciclo    \equiv S1;S2;$
    \item $f_{v}    \equiv m-i$
\end{itemize}

\subsubsection*{$\{I \wedge B\}$ ciclo $\{ I \}$}

$wp(S1;S2, I) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, I))$

\begin{itemize}
    \item $wp(S2; I) \equiv$

    $wp(result := result * m, 0 \leq i \leq n \wedge result = m^{i}) \stackrel{Ax1}{\equiv}$

    $\{0 \leq i \leq n \wedge result * m = m^{i}\}$

    \item $wp(S1, wp(S2, I)) \equiv$

    $wp(i:= i + 1, 0 \leq i \leq n \wedge result * m = m^{i}) \stackrel{Ax1}{\equiv}$

    $\{ 0 \leq i+1 \leq n \wedge result*m = m^{i+1} \}$

\end{itemize}

Qvq $I \wedge B \implica wp(S1;S2, I)$

\begin{itemize}
    \item $I \wedge B \equiv$
    
    $0 \leq i \leq n \wedge result = m^{i} \wedge i < n \equiv$

    $0 \leq i < n \wedge result = m^{i}$

    \item $I \wedge B \implica wp(S1;S2, I) \equiv$

    $0 \leq i < n \wedge result = m^{i} \implica 0 \leq i+1 \leq n \wedge result*m = m^{i+1} \equiv \True$
\end{itemize}
    
\subsubsection*{$\{I \wedge B \wedge (v_{0} = f_{v})\}$ ciclo $\{f_{v} < v_{0}\}$}

$wp(S1;S2, n-i<v_{0}) \stackrel{Ax3}{\equiv}$

$wp(S1, wp(S2, n-i<v_{0})) \stackrel{Ax3}{\equiv}$

\begin{itemize}
    \item $wp(S2, n-i<v_{0}) \equiv$
    
    $ wp(result:=result * m, n-i<v_{0}) \stackrel{Ax1}{\equiv}$

    $ \{ n-i<v_{0}) \}$

    \item $wp(S1, wp(S2, f_{v} < v_{0})) \equiv$

    $ wp(i:= i + 1, n-i-1<v_{0})) \stackrel{Ax1}{\equiv}$

    $ n-i-1<v_{0} $s
\end{itemize}

Qvq $(I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0})$

$(I \wedge B \wedge (v_{0} = f_{v})) \implica wp(S1;S2, f_{v} < v_{0}) \equiv$

$0 \leq i < n \wedge result = m^{i} \wedge v_{0} = n-i \implica n-i-1<v_{0} \equiv True$

Es valido

\subsection*{d)}

\begin{verbatim}
    i:= 2;
    result:= m*m;
    while(i < n) do
        result := result * m;
        i := i + 1
    endwhile
\end{verbatim}

\subsubsection*{Datos}
\begin{itemize}
    \item $P_{c}    \equiv n \geq 0 \wedge (m \neq 0 \vee n \neq 0) \wedge i = 2 \wedge result = m*m$
    \item $Q_{c}    \equiv result = m^{n}$
    \item $I        \equiv 0 \leq i \leq n \wedge result = m^{i}$
    \item $B        \equiv i < m$
    \item $S1       \equiv i := i + 1$
    \item $S2       \equiv result := result * m$
    \item $ciclo    \equiv S1;S2;$
    \item $f_{v}    \equiv m-i$
\end{itemize}

Es valido

\end{document}
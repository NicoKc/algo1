% \documentclass{standalone}
% \input{../Latex/Algo1Macros.tex}

% \begin{document}

\begin{proc}{silencios}{\In s: señal,
    \In freq: \ent,
    \In prof: \ent,
    \Out intervalos: \TLista{intervalo}}{}
\pre{ esSeñalAux(s, prof, freq) \wedge (umbral > 0) }
\post{

    noHayIntervalosRepetidos(intervalos) \wedge \\
    \paraTodo{i}{0}{\longitud{intervalos}} \implicaLuego (\\
    esSilencio(s, umbral, freq, intervalos[i])
    )
}
\end{proc}

\pred{esSilencio}{s: senal,
    umbral: \ent,
    freq: \ent,
    in: intervalo}
{

    finEsMayorQueInicio(in_{0}, in_{1}) \wedge

    estaDentroDeLaSeñal(s, in_{0}, in_{1}) \wedge

    esAlMenosUnDecimoDeSegundo(freq, in_{0}, in_{1}) \wedge

    entreIndicesNoPasaCiertoUmbral(s, umbral, in_{0}, in_{1}) \wedge

    losAdyacentesSuperanElUmbral(s, umbral, in_{0}, in_{1})
}

\pred{noHayIntervalosRepetidos}{ins: \TLista{intervalo}}
{
    \paraTodo{i}{0}{\longitud{ins}}
    \implicaLuego (
        \#apariciones(ins, e) = 1
    )
}

\pred{finEsMayorQueInicio}{inicio: \ent,
    fin: \ent}
{
    fin > inicio
}

\pred{estaDentroDeLaSeñal}{s: señal,
    inicio: \ent,
    fin: \ent,}
{
    (inicio \geq 0) \wedge (fin < |s|)
}

\pred{esAlMenosUnDecimoDeSegundo}{freq: \ent,
    inicio: \ent,
    fin: \ent,}
{
    (fin - inicio + 1) \geq (frecuencia * 100)
}

\pred{losAdyacentesSuperanElUmbral}{s: señal,
    umbral: \ent,
    inicio: \ent,
    fin: \ent}
{

    (
        (inicio = 0) \vee (
            (
                inicio-1 \geq 0 
            ) \yLuego (
                s[inicio-1] \geq umbral
            )
        )
    ) \wedge (

        (fin = \longitud{s} - 1) \vee (
            (
                fin+1 < \longitud{s}
            ) \yLuego (
                s[fin+1] \geq umbral
            )
        )
    )
}

\pred{entreIndicesNoPasaCiertoUmbral}{s: señal,
    umbral: \ent,
    inicio: \ent,
    fin: \ent}
{

    \paraTodo{i}{inicio}{fin+1}
    \implicaLuego
    (abs(s[i]) \leq umbral)
}

% \end{document}